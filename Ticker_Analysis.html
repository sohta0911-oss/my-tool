<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ticker Analysis v2.2 - Refined</title>
    
    <style>
        /* =========================================
           1. 色の定義 (Design Tokens)
           ========================================= */
        :root {
            /* ベースカラー：ライチの瑞々しさをイメージ */
            --bg-color: #fff9f9;           /* 全体の背景色（薄いピンク） */
            --container-bg: #ffffff;       /* カードの背景色（白） */
            --border-color: #ffe0e0;       /* 入力欄の枠線 */
            
            /* テキストカラー */
            --text-main: #4a1a1a;          /* メインの文字（濃い茶色） */
            --text-sub: #a07a7a;           /* 補足の文字（薄い茶色） */
            
            /* リンク先ごとのイメージカラー */
            --tv-blue: #2962ff;            /* TradingViewの青 */
            --summary-orange: #ff9800;     /* 分析サイトのオレンジ */
            --finance-green: #4caf50;      /* Yahoo!ファイナンスの緑 */
        }

        /* =========================================
           2. 全体のレイアウト (Global Layout)
           ========================================= */
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
            margin: 0;
            display: flex;                 /* 子要素を自由に並べる設定 */
            align-items: center;           /* 垂直方向の真ん中 */
            justify-content: center;       /* 水平方向の真ん中 */
            height: 100vh;                 /* 画面の高さ100%分 */
            background-color: var(--bg-color);
        }

        /* メインコンテンツを包むカード */
        .container {
            width: 100%;
            max-width: 360px;              /* スマホでちょうどいい幅 */
            text-align: center;
            padding: 25px;
            background: var(--container-bg);
            border-radius: 20px;           /* 角を丸く */
            box-shadow: 0 10px 25px rgba(255, 180, 180, 0.2); /* 柔らかい赤い影 */
        }

        /* 見出し */
        h2 { 
            font-size: 1.3rem; 
            font-weight: 800; 
            color: #d32f2f; 
            margin-bottom: 20px; 
            letter-spacing: 0.05em; 
        }

        /* =========================================
           3. 入力フォーム (Input Field)
           ========================================= */
        input {
            width: 100%;
            box-sizing: border-box;        /* パディングを含めた幅計算 */
            padding: 14px;
            font-size: 1.1rem;
            border: 2px solid var(--border-color);
            border-radius: 12px;
            margin-bottom: 20px;
            text-align: center;
            outline: none;                 /* クリック時の青枠を消す */
            background-color: #fff;
            color: var(--text-main);
            transition: all 0.2s;          /* 変化を滑らかに */
        }

        /* 入力中（フォーカス時）のスタイル */
        input:focus { 
            border-color: #ff8080; 
            box-shadow: 0 0 8px rgba(255,128,128,0.2); 
        }

        /* =========================================
           4. ボタンエリア (Button Grid)
           ========================================= */
        /* ボタンを3つ並べるグリッド */
        .btn-group {
            display: grid;
            grid-template-columns: repeat(3, 1fr); /* 3列均等並び */
            gap: 10px;                     /* ボタン間の隙間 */
        }

        /* 各ボタンとその下の説明文をセットにする */
        .btn-wrapper {
            display: flex;
            flex-direction: column;        /* 縦に並べる */
            align-items: center;
        }

        /* 共通のボタンスタイル */
        button {
            width: 100%;
            padding: 12px 0;
            font-size: 0.85rem;
            font-weight: 700;
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: transform 0.1s, opacity 0.2s;
        }

        /* 押した時の「凹む」演出 */
        button:active { 
            transform: scale(0.95); 
            opacity: 0.8; 
        }

        /* 各ボタンの色分け */
        .btn-summary { background-color: var(--summary-orange); }
        .btn-tv { background-color: var(--tv-blue); }
        .btn-finance { background-color: var(--finance-green); }

        /* ボタン下の補足説明 */
        .btn-desc {
            margin-top: 6px;
            font-size: 0.6rem;
            line-height: 1.2;
            color: var(--text-sub);
            font-weight: 500;
        }
    </style>
</head>
<body>

    <div class="container">
        <h2>TICKER ANALYSIS</h2>
        <input type="text" id="ticker" placeholder="例: NVDA / 7203" autocomplete="off">
        
        <div class="btn-group">
            <div class="btn-wrapper">
                <button class="btn-summary" onclick="execute('summary')">Summary</button>
                <div class="btn-desc">Nikkei/Finviz</div>
            </div>
            <div class="btn-wrapper">
                <button class="btn-tv" onclick="execute('tv')">Chart</button>
                <div class="btn-desc">TradingView</div>
            </div>
            <div class="btn-wrapper">
                <button class="btn-finance" onclick="execute('finance')">Finance</button>
                <div class="btn-desc">Yahoo!ファイナンス</div>
            </div>
        </div>
    </div>

    <script>
        function execute(type) {
            // 入力された文字をバケツ(val)に入れる。trim()で余計な空白を削除
            const val = document.getElementById('ticker').value.trim();
            if (!val) return; // 空っぽなら何もしない

            // 日本株かどうかの判定 (数字4桁 または 3桁+英字)
            const isJapan = /^\d{4}$/.test(val) || /^\d{3}[A-Z]$/i.test(val);
            const code = val.toUpperCase(); // 全文字を大文字にする
            let url = "";

            // 条件分岐：日本株の場合
            if (isJapan) {
                if (type === 'summary') url = `https://www.nikkei.com/nkd/company/?scode=${code}`;
                if (type === 'tv') url = `https://jp.tradingview.com/chart/?symbol=TSE:${code}`;
                if (type === 'finance') url = `https://finance.yahoo.co.jp/quote/${code}.T`;
            } 
            // 条件分岐：米国株などの場合
            else {
                if (type === 'summary') url = `https://finviz.com/quote.ashx?t=${code}`;
                if (type === 'tv') url = `https://jp.tradingview.com/chart/?symbol=${code}`;
                if (type === 'finance') url = `https://finance.yahoo.co.jp/quote/${code}`;
            }

            // 作成したURLを新しいタブで開く
            if (url) window.open(url, '_blank');
        }
    </script>
</body>
</html>
